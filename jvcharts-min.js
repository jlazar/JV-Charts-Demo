!function t(e,a,r){function n(o,l){if(!a[o]){if(!e[o]){var s="function"==typeof require&&require;if(!l&&s)return s(o,!0);if(i)return i(o,!0);var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}var c=a[o]={exports:{}};e[o][0].call(c.exports,function(t){var a=e[o][1][t];return n(a?a:t)},c,c.exports,t,e,a,r)}return a[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)n(r[o]);return n}({1:[function(t,e,a){"use strict";var r=t("./jvCharts.js");r=t("./visuals/jvLine.js"),r=t("./visuals/jvBar.js"),r=t("./visuals/jvPie.js"),window.jvCharts=r},{"./jvCharts.js":2,"./visuals/jvBar.js":5,"./visuals/jvLine.js":6,"./visuals/jvPie.js":7}],2:[function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!isNaN(t)){var a=d3.format(".0f");return"billions"===e?a(t/1e9)+"B":"millions"===e?a(t/1e6)+"M":"thousands"===e?a(t/1e3)+"K":"decimals"===e?(a=d3.format(".2f"))(t):"nodecimals"===e?a(t):0===t?0:Math.abs(t)>=1e9?a(t/1e9)+"B":Math.abs(t)>=1e6?a(t/1e6)+"M":Math.abs(t)>=1e3?a(t/1e3)+"K":(Math.abs(t)<=10&&(a=d3.format(".2f")),a(t))}return t}function i(t){if(null!=t){var e=Math.max.apply(null,t),a=Math.min.apply(null,t),r=e-a,n=Math.abs(Math.round(r/10));if(Math.abs(n)>=1e9)return"billions";if(Math.abs(n)>=1e6)return"millions";if(Math.abs(n)>=1e3)return"thousands";if(Math.abs(n)<=10)return"decimals";if(Math.abs(n)>=10)return"nodecimals"}return""}function o(t){var e,a="";return"currency"===t&&(a=d3.format("$,")),"fixedCurrency"===t&&(a=d3.format("($.2f")),"percent"===t&&(e=Math.max(0,d3.precisionFixed(.05)-2),a=d3.format("."+e+"%")),"millions"===t&&(e=d3.precisionPrefix(1e5,13e5),a=d3.formatPrefix("."+e,13e5)),"commas"===t&&(a=d3.format(",.0f")),"none"!==t&&""!==t||(a=d3.format("")),"displayValues"===t&&(a=d3.format(",.2f")),a}function l(t,e){var a=s(e,t.legendData),r=JSON.parse(JSON.stringify(t.chartData));if(a)for(var n=0;n<r.length;n++)for(var i=0;i<a.length;i++)a[i].toggle===!1&&delete r[n][a[i].element];return r}function s(t,e){for(var a=[],r=0;r<e.length;r++)a.push({element:e[r]});for(var r=0;r<a.length;r++){for(var n=0;n<t.length;n++)a[r].element!==t[n]||(a[r].toggle=!0);a[r].toggle!==!0&&(a[r].toggle=!1)}return a}function d(t,e,a){var r,n=t.svg,i=t.config.container,o=t.options,l=0,d=0,c=e.length;if(o.legendMax=9,o.gridSize=12,o.legendIndex||(o.legendIndex=0),o.legendIndexMax||(o.legendIndexMax=Math.floor(c/o.legendMax-.01)),o.legendHeaders||o.seriesFlipped?!o.flippedLegendHeaders&&o.seriesFlipped&&(o.flippedLegendHeaders=JSON.parse(JSON.stringify(e))):o.legendHeaders=JSON.parse(JSON.stringify(e)),o.seriesFlipped)var g=s(o.flippedLegendHeaders,e);else var u=s(o.legendHeaders,e);r=n.append("g").attr("class","legend");var f=r.selectAll("rect").data(e).enter().append("rect").attr("class","legendRect").attr("x",function(t,e){e%(o.legendMax/3)==0&&e>0&&(d=0);var a=200*d;return d++,a}).attr("y",function(t,e){return e%(o.legendMax/3)==0&&e>0&&l++,e%o.legendMax==0&&e>0&&(l=0),i.height+10+15*(l+1)-5}).attr("width",o.gridSize).attr("height",o.gridSize).attr("fill",function(t,a){return h(o.color,a,e[a])}).attr("display",function(t,e){return e>=o.legendIndex*o.legendMax&&e<=o.legendIndex*o.legendMax+(o.legendMax-1)?"all":"none"}).attr("opacity",function(e,a){return!u&&!t.options.seriesFlipped||t.options.seriesFlipped&&!g?"1":!t.options.seriesFlipped&&u[a].toggle===!0||t.options.seriesFlipped&&g[a].toggle===!0?"1":"0.2"});if(l=0,d=0,r.selectAll("text").data(e).enter().append("text").attr("class",function(t,e){return"legendText editable editable-text editable-content editable-legend-"+e}).attr("x",function(t,e){e%(o.legendMax/3)==0&&e>0&&(d=0);var a=200*d;return d++,a+17}).attr("y",function(t,e){return e%(o.legendMax/3)==0&&e>0&&l++,e%o.legendMax==0&&e>0&&(l=0),i.height+10+15*(l+1)}).attr("text-anchor","start").attr("dy","0.35em").attr("fill","black").attr("font-size",t.options.fontSize).attr("display",function(t,e){return e>=o.legendIndex*o.legendMax&&e<=o.legendIndex*o.legendMax+(o.legendMax-1)?"all":"none"}).text(function(a,r){var n=e[r];return"gantt"===t.config.type&&(n=e[r].slice(0,-5)),n.length>20?n.substring(0,19)+"...":n}).data(e).append("svg:title").text(function(t){return t}),o.legendIndexMax>0&&p(t,e,a),r){var x=r.node().getBBox().width;r.attr("transform","translate("+(i.width-x)/2+", 30)")}return f}function c(t){for(var e=[],a=t[0],r=0;r<a.length;r++)"0.2"!==a[r].attributes.opacity.value&&e.push(a[r].__data__);return e}function p(t,e,a){var r,n=t.svg,i=t.config.container,o=t.options;if(n.selectAll(".legend-carousel").remove(),n.selectAll("#legend-text-index").remove(),r=n.append("g").attr("class","legend-carousel"),r.append("polygon").attr("id","leftChevron").attr("class","pointer-cursor").style("fill","#c2c2d6").attr("transform","translate(0,0)").attr("points","0,7.5, 15,0, 15,15").on("click",function(){o.legendIndex>=1&&o.legendIndex--,n.selectAll(".legend").remove();var r=d(t,e,a);O(t,r,a,e),t.localCallbackApplyEdits()}).attr({display:function(){return 0===o.legendIndex?"none":"all"}}),r.append("text").attr("id","legend-text-index").attr("x",35).attr("y",12.5).style("text-anchor","start").style("font-size",t.options.fontSize).text(function(){return o.legendIndex+" / "+o.legendIndexMax}).attr({display:function(){return 0===o.legendIndexMax?"none":"all"}}),r.append("polygon").attr("id","rightChevron").attr("class","pointer-cursor").style("fill","#c2c2d6").attr("transform","translate(85,0)").attr("points","15,7.5, 0,0, 0,15").on("click",function(){o.legendIndex<o.legendIndexMax&&o.legendIndex++,n.selectAll(".legend").remove();var r=d(t,e,a);O(t,r,a,e),t.localCallbackApplyEdits()}).attr({display:function(){return o.legendIndex===o.legendIndexMax?"none":"all"}}),r){var l=r.node().getBBox().width;r.attr("transform","translate("+(i.width-l)/2+","+(i.height+105)+")")}}function g(t,e){for(var a=[],r=JSON.parse(JSON.stringify(t)),n=0;n<r.length;n++){for(var i=[],o=0;o<e.currentData.legendData.length;o++)void 0!==r[n][e.currentData.legendData[o]]&&i.push(r[n][e.currentData.legendData[o]]);a.push(i)}return a}function u(t,e,a,r,n,i){for(var o=z.getAxisScale("x",a,n,e),l=z.getAxisScale("y",r,n,e),s=[],d=Object.keys(i.currentData.dataTable).length-1,c={},p=0;p<t.length;p++){var g=[];for(var u in t[p])t[p].hasOwnProperty(u)&&g.push(t[p][u]);s.push(g.slice(1,t[p].length))}return e.rotateAxis===!0&&e.stackToggle===!0?(c.startx=function(){return 0},c.starty=function(){return 0},c.startwidth=function(){return 0},c.startheight=function(){return.95*l.bandwidth()},c.x=function(t,e,a){for(var r=0,n=e-1;n>=0;n--)isNaN(a[n].__data__)||(r+=a[n].__data__);return 0===o(r)?1:o(r)},c.y=function(){return 0},c.width=function(t){return Math.abs(o(0)-o(t))},c.height=function(){return.95*l.bandwidth()}):e.rotateAxis===!0&&e.stackToggle===!1?(c.startx=function(){return 0},c.starty=function(t,e){return l.bandwidth()/d*e},c.startwidth=function(){return 0},c.startheight=function(t){return l.bandwidth()/d*.95*1},c.x=function(t){return o(o(0)-o(t)>0?t:0)},c.y=function(t,e){return l.bandwidth()/d*e},c.width=function(t){return Math.abs(o(0)-o(t))},c.height=function(){return l.bandwidth()/d*.95*1}):e.rotateAxis===!1&&e.stackToggle===!0?(c.startx=function(){return 0},c.starty=function(){return n.height},c.startwidth=function(){return.95*o.bandwidth()*1},c.startheight=function(){return 0},c.x=function(){return 0},c.y=function(t,e,a){for(var r=0,n=e-1;n>=0;n--)isNaN(a[n].__data__)||(r+=a[n].__data__);return l(parseFloat(t)+r)},c.width=function(){return.95*o.bandwidth()*1},c.height=function(t){return n.height-l(t)}):e.rotateAxis===!1&&e.stackToggle===!1&&(c.startx=function(t,e){return o.bandwidth()/d*e},c.starty=function(){return n.height},c.startwidth=function(){return o.bandwidth()/d*.95},c.startheight=function(){return 0},c.x=function(t,e){return o.bandwidth()/d*e},c.y=function(t){return l(l(0)-l(t)>0?t:0)},c.width=function(){return o.bandwidth()/d*.95},c.height=function(t){return Math.abs(l(0)-l(t))}),c}function h(t,e,a){var r=e;if(void 0!==a&&t.hasOwnProperty(a)&&t[a])return t[a];var n=[];if(Array.isArray(t))n=t;else{n=[];for(var i in t)t.hasOwnProperty(i)&&t[i]&&n.push(t[i])}if(!n[r])for(;r>n.length-1;)r-=n.length;return n[r]}function f(t,e,a,r,n){var i=.4,o=.2;"no-padding"===r&&(i=0,o=0);var l,s;if(s="x"===t?a.width:a.height,"DATE"===e.dataType){for(var d=0;d<e.values.length;d++)e.values[d]=new Date(e.values[d]);var c=Math.max.apply(null,e.values),p=Math.min.apply(null,e.values);l=d3.scaleTime().domain([new Date(p),new Date(c)]).rangeRound([0,s])}else if("STRING"===e.dataType)l=d3.scaleBand().domain(e.values).range([0,s]).paddingInner(i).paddingOuter(o);else if("NUMBER"===e.dataType){var g;null!=n&&"object"===(void 0===n?"undefined":C(n))&&n.hasOwnProperty("xReversed")&&n.hasOwnProperty("yReversed")?((n.xReversed&&"x"===t||"y"===t&&!n.yReversed)&&(g=[e.max,e.min]),(n.yReversed&&"y"===t||"x"===t&&!n.xReversed)&&(g=[e.min,e.max])):g="x"===t?[e.min,e.max]:[e.max,e.min],n&&n.hasOwnProperty("axisType")&&"Logarithmic"===n.axisType?(g[1]=.1,l=d3.scaleLog().base(10).domain(g).rangeRound([0,s])):l=d3.scaleLinear().domain(g).rangeRound([0,s])}else console.error("Axis is not a valid data type");return l}function x(t,e,a){var r,n=.4,i=.2;if("no-padding"===a&&(n=0,i=0),"DATE"===t.dataType){for(var o=0;o<t.values.length;o++)t.values[o]=new Date(t.values[o]);var l=Math.max.apply(null,t.values),s=Math.min.apply(null,t.values);r=d3.time.scale().domain([new Date(s),new Date(l)]).rangeRound([0,e.width])}else if("STRING"===t.dataType||t.values.length>2)r=d3.scaleBand().domain(t.values).range([0,e.width]).paddingInner(n).paddingOuter(i);else if("NUMBER"===t.dataType){var d=t.values[t.values.length-1],c=t.values[0];r=d3.scaleBand().domain([c,d]).rangeRound([0,e.width])}return r}function v(t,e){var a;if("STRING"===t.dataType)a=d3.scaleOrdinal().domain(t.values).range([0,e.height]);else if("NUMBER"===t.dataType){var r=t.values[t.values.length-1],n=t.values[0];a=d3.scaleLinear().domain([r,n]).rangeRound([0,e.height])}return a}function y(t,e){for(var a,r=0;r<e.length;r++)if(e[r].varKey.replace(/_/g," ")===t.replace(/_/g," ")&&e[r].hasOwnProperty("type")){a=e[r].type,a="STRING"===a?"STRING":"DATE"===a?"DATE":"NUMBER";break}return a}function b(t){var e=[];for(var a in t.dataTable)t.dataTable.hasOwnProperty(a)&&"label"!==a&&e.push(t.dataTable[a]);return e}function D(t,e,a){var r={},n=[],i=[];if(Array.isArray(t))r=t.length>0?m(e,t):m(e,a);else if(t===Object(t)){for(var o=0;o<e.length;o++){var l=e[o];t.hasOwnProperty(l)?n.push(t[l]):i.push(e[o])}if(n.length===e.length)r=t;else if(n.length>0){var s=Object.values(t);r=s.length>e.length?m(e,s):m(e,a)}else{var s=Object.values(t);r=s.length>e.length?m(e,s):m(e,a)}}else r=m(e,a);return r}function m(t,e){for(var a={},r=0,n=0;n<t.length;n++)r>e.length-1&&(r=0),a[t[n]]=e[r],r++;return a}function A(t){var e={};return t&&(e=t),e.hasOwnProperty("rotateAxis")||(e.rotateAxis=!1),e.hasOwnProperty("stackToggle")&&"stack-data"===e.stackToggle?e.stackToggle=!0:e.stackToggle=!1,e.hasOwnProperty("colors")&&(e.color=e.colors),e.hasOwnProperty("thresholds")||(e.thresholds=[]),e}function T(t,e,a,r,l,s,d){var c,p="";if(a.rotateAxis){var g="",u=parseInt(r.height)-l.top-l.bottom;if(0!==u&&u/e.values.length<parseInt(a.fontSize))e.hideValues=!0;else{for(var h=0;h<e.values.length;h++){var f=e.values[h].toString();f.length>g.length&&(g=f)}p=g}}else if(a.yLabelFormat||a.xLabelFormat){var x=a.yLabelFormat;"x"===t&&(x=a.xLabelFormat),c=i(e.values);var v=o(x);p=""!==v?v(e.max):n(e.max)}else if(c=i(e.values),e.hasOwnProperty("max"))p=n(e.max,c);else for(var y=0,h=0;h<e.values.length;h++)e.values[h].length>y&&(y=e.values[h].length,p=e.values[h]);"heatmap"===d&&p.length<e.label.length+5&&(p="x"===t?e.label:e.label+"Extra");var b=s.append("svg").attr("class","dummy-svg"),D=b.append("text").attr("font-size",function(){return"y"===t&&"none"!==a.yLabelFontSize?a.yLabelFontSize:"x"===t&&"none"!==a.xLabelFontSize?a.xLabelFontSize:a.fontSize}).attr("x",0).attr("y",0).text(p),m=D.node().getBBox().width;return s.select(".dummy-svg").remove(),m}function w(t,e,a){var r=[];if("bar"===a||"pie"===a||"line"===a||"area"===a)for(var n=1;n<_.keys(e).length;n++)e.hasOwnProperty("value "+n)&&null!=t[e["value "+n]]&&r.push(t[e["value "+n]]);else for(var i in t)t.hasOwnProperty(i)&&r.push(t[i]);return r}function v(t,e,a,r){var n,i=.4,o=.2;if("no-padding"===a&&(i=0,o=0),"STRING"===t.dataType)n=d3.scale.ordinal().domain(t.values).rangePoints([0,e.height]).rangeRoundBands([0,e.height],i,o);else if("NUMBER"===t.dataType){var l=t.values[t.values.length-1],s=t.values[0];n=r?d3.scaleLinear().domain([l,s]).rangeRound([e.height,0]):d3.scaleLinear().domain([l,s]).rangeRound([0,e.height])}return n}function k(t,e,a){return d3.scaleLinear().domain([d3.min(t.values),d3.max(t.values)]).rangeRound([a.NODE_MIN_SIZE,a.NODE_MAX_SIZE]).nice()}function S(t,e,a){var r=a.config.container,n=a.options,i=z.getPlotData(e,a);return t.data(i).enter().append("rect").attr("class","event-rect").attr("x",function(t,a){return n.rotateAxis?0:r.width/e.length*a}).attr("y",function(t,a){return n.rotateAxis?r.height/e.length*a:0}).attr("width",function(){return n.rotateAxis?r.width:r.width/e.length}).attr("height",function(){return n.rotateAxis?r.height/e.length:r.height}).attr("fill","transparent").attr("class",function(t,r){return"event-rect editable-bar bar-col-"+String(e[r][a.currentData.dataTable.label]).replace(/\s/g,"_").replace(/\./g,"<dot>")})}function M(t){var e=t.svg,a=[];if("none"!==t.options.thresholds)for(var r=0;r<Object.keys(t.options.thresholds).length;r++)a.push(t.options.thresholds[r].thresholdName);var n=e.append("g").attr("class","thresholdLegendContainer"),i=n.selectAll(".thresholdLegend").data(a).enter().append("g").attr("class","thresholdLegend").attr("transform",function(t,e){return"translate(-24,"+(19*e-19*a.length/2)+")"});if(i.append("rect").attr("width",12).attr("height",12).style("fill",function(e,a){return t.options.thresholds[a].thresholdColor}),i.append("text").attr("x",24).attr("y",8).attr("font-size",".75em").text(function(t){return t}),n){var o=n.node().getBBox().width;n.attr("transform","translate("+(t.config.container.width-o)+","+10*a.length+")")}}function O(t,e,a){e.on("click",function(){var r=d3.select(this);"0.2"!==r._groups[0][0].attributes.opacity.value?r.attr("opacity","0.2"):r.attr("opacity","1");var n=c(e._groups);t.options.seriesFlipped?t.options.flippedLegendHeaders=n:t.options.legendHeaders=n,t.options.seriesFlipped?t[a](t.flippedData):t[a](t.data)})}function L(t,e,a){var r,n,i=t.svg,o=t.options,l=e.length;o.gridSize=20,o.legendMax=9,o.legendIndex||(o.legendIndex=0),o.legendIndexMax||(o.legendIndexMax=Math.floor(l/o.legendMax-.01)),o.legendIndexMax>=0&&(o.legendHeaders||(o.legendHeaders=JSON.parse(JSON.stringify(e))),n=s(o.legendHeaders,e)),r=i.append("g").attr("class","legend").attr("transform","translate(18,20)");var d=r.selectAll("rect").data(e).enter().append("rect").attr("class","legendRect").attr("x","3").attr("y",function(t,e){return o.gridSize*(e%o.legendMax)*1.1}).attr("width",o.gridSize).attr("height",o.gridSize).attr("fill",function(a,r){return!n&&!t.options.seriesFlipped||t.options.seriesFlipped&&!n?h(o.color,r,e[r]):!t.options.seriesFlipped&&n[r].toggle===!0||t.options.seriesFlipped&&n[r].toggle===!0?h(o.color,r,e[r]):"#FFFFFF"}).attr("display",function(t,e){return e>=o.legendIndex*o.legendMax&&e<=o.legendIndex*o.legendMax+(o.legendMax-1)?"all":"none"}).attr("opacity","1");return r.selectAll("text").data(e).enter().append("text").attr("class",function(t,e){return"legendText editable editable-text editable-content editable-legend-"+e}).attr("x",o.gridSize+7).attr("y",function(t,e){return o.gridSize*(e%o.legendMax)*1.1+10}).attr("text-anchor","start").attr("dy","0.35em").attr("fill","black").attr("font-size",t.options.fontSize).attr("display",function(t,e){return e>=o.legendIndex*o.legendMax&&e<=o.legendIndex*o.legendMax+(o.legendMax-1)?"all":"none"}).text(function(t,a){var r=e[a];return r.length>20?r.substring(0,19)+"...":r}).data(e).append("svg:title").text(function(t){return t}),o.legendIndexMax>0&&N(t,e,a),d}function N(t,e,a){var r,n=t.svg,i=t.options;n.selectAll(".legend-carousel").remove(),n.selectAll("#legend-text-index").remove(),r=n.append("g").attr("class","legend-carousel"),r.append("polygon").attr("id","leftChevron").attr("class","pointer-cursor").style("fill","#c2c2d6").attr("transform","translate(0,"+(i.legendMax*i.gridSize+50)+")").attr("points","0,7.5, 15,0, 15,15").on("click",function(){i.legendIndex>=1&&i.legendIndex--,n.selectAll(".legend").remove();var r=L(t,e,a);O(t,r,a,e),t.localCallbackApplyEdits()}).attr({display:function(){return 0===i.legendIndex?"none":"all"}}),r.append("text").attr("id","legend-text-index").attr("x",35).attr("y",242.5).style("text-anchor","start").style("font-size",t.options.fontSize).text(function(){return i.legendIndex+" / "+i.legendIndexMax}).attr({display:function(){return 0===i.legendIndexMax?"none":"all"}}),r.append("polygon").attr("id","rightChevron").attr("class","pointer-cursor").style("fill","#c2c2d6").attr("transform","translate(85,"+(i.legendMax*i.gridSize+50)+")").attr("points","15,7.5, 0,0, 0,15").on("click",function(){i.legendIndex<i.legendIndexMax&&i.legendIndex++,n.selectAll(".legend").remove();var r=L(t,e,a);O(t,r,a,e)}).attr({display:function(){return i.legendIndex===i.legendIndexMax?"none":"all"}})}var C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),I=t("./jvTip.js"),z=function(){function t(e){r(this,t);var a=this;a.config={type:e.type.toLowerCase(),name:e.name,container:e.container},a.chartDiv=e.chartDiv,a.localCallbackRelatedInsights=e.localCallbackRelatedInsights,a.options=A(e.options),a.vars=a.getDefaultOptions(),e.hasOwnProperty("infiniteScrollFunc")&&(a.infiniteScrollFunc=e.infiniteScrollFunc),e.hasOwnProperty("sortColumnFunc")&&(a.sortColumnFunc=e.sortColumnFunc),a.tip=new I({type:e.tipConfig.type,chartDiv:e.chartDiv}),a.showComments=!1,a.draw={},a.draw.showToolTip=!0,a.currentData={},a.toggleDefaultMode=function(t){if(t){var e=a.chartDiv.select(".editable-svg");e.on("dblclick",function(){"function"==typeof a.localCallbackRelatedInsights&&a.localCallbackRelatedInsights()}),e.on("click",!1),a.draw.showToolTip=!0}else a.draw.showToolTip=!1,a.removeHighlight()},e.setData&&(a.data={chartData:e.setData.data,dataTable:e.setData.dataTable,dataTableKeys:e.setData.dataTableKeys},a.colors=e.setData.colors,e.setData.additionalInfo&&(a.data.additionalInfo=e.setData.additionalInfo),e.setData.markerType&&(a.data.markerType=e.setData.markerType),a[a.config.type].setData(a,e.setData)),"object"===C(a[a.config.type])&&"function"==typeof a[a.config.type].paint?a[a.config.type].paint(a):console.log("no paint function for: "+a.config.type)}return F(t,[{key:"setAxisData",value:function(t,e,a){var r,n=this,i=[],o=e.chartData,l="",s=0,d=n.options,c=e.dataTableKeys;if(c||(c=a),"x"===t){e.dataTable?e.dataTable.hasOwnProperty("label")?l=e.dataTable.label:console.error("Label doesn't exist in dataTable"):console.log("DataTable does not exist"),r="STRING",l=l.replace(/_/g," ");for(var p=0;p<o.length;p++)null===o[p][l]?i.push("NULL_VALUE"):""===o[p][l]?i.push("EMPTY_STRING"):(o[p][l]||0===o[p][l])&&i.push(o[p][l])}else{for(var p=0;p<c.length;p++)"label"!==c[p].vizType&&(l=c[p].varKey);r=y(l,c);for(var p=0;p<o.length;p++){var g=0;for(var u in e.dataTable)o[p].hasOwnProperty(e.dataTable[u])&&"label"!==u&&(g+=o[p][e.dataTable[u]],i.push(o[p][e.dataTable[u]]));g>s&&(s=g)}l=l.replace(/_/g," ")}if("NUMBER"===r){if(n.options.stackToggle)var h=s;else var h=Math.max.apply(null,i);var f=Math.min.apply(null,i);return f=Math.min(0,f),"x"===t?(null!=d.xMin&&"none"!==d.xMin&&(f=d.xMin),null!=d.xMax&&"none"!==d.xMax&&(h=d.xMax)):"y"===t&&(null!=d.yMin&&"none"!==d.yMin&&(f=d.yMin),null!=d.yMax&&"none"!==d.yMax&&(h=d.yMax)),"NUMBER"===r&&1===i.length&&(i[0]>=0?i.unshift(0):i.push(0)),{label:l,values:i,dataType:r,min:f,max:h}}return{label:l,values:i,dataType:r}}},{key:"setFlippedSeries",value:function(t){var e=this,a=e.data.chartData,r=e.data.dataTable,n=e.data.xAxisData.label,i=[],o={},l=1,s=[];for(var d in r)if(r.hasOwnProperty(d)){var c={};if(r[d]!==n){c[n]=r[d];for(var p=0;p<a.length;p++)c[a[p][n]]=a[p][r[d]],s.indexOf(a[p][n])===-1&&(o["value "+l]=a[p][n],l++,s.push(a[p][n]));i.push(c)}}o.label=n,e.flippedData={chartData:i,dataTable:o},"bar"===e.config.type||"line"===e.config.type||"area"===e.config.type?(e.flippedData.xAxisData=e.setAxisData("x",e.flippedData,t),e.flippedData.yAxisData=e.setAxisData("y",e.flippedData,t),e.flippedData.legendData=b(e.flippedData)):console.log("Add additional chart type to set flipped series")}},{key:"organizeChartData",value:function(t,e){var a,r,n=this,i=n.data.dataTableKeys,o=t;if("none"===o)for(var l=0;l<i.length;l++)if("label"===i[l].vizType){o=i[l].uri;break}if(o=o.replace(/_/g," "),!n.data.chartData[0][o]){for(var s=!1,l=0;l<i.length;l++){var d=i[l];if(d.operation.hasOwnProperty("calculatedBy")&&d.operation.calculatedBy[0]===o){o=d.uri.replace(/_/g," "),s=!0;break}}if(!s)return void console.error("Not a valid sort")}for(var l=0;l<i.length;l++){var c=i[l];if(c.uri.replace(/_/g," ")===o){r=c.type;break}}switch(a=null!=r&&"DATE"===r?n.data.chartData.sort(function(t,e){return new Date(t[o])-new Date(e[o])}):null!=r&&"NUMBER"===r?n.data.chartData.sort(function(t,e){if(!isNaN(t[o])&&!isNaN(e[o]))return t[o]-e[o]}):n.data.chartData.sort(function(t,e){return isNaN(t[o])||isNaN(e[o])?t[o].toLowerCase()<e[o].toLowerCase()?-1:t[o].toLowerCase()>e[o].toLowerCase()?1:0:parseFloat(t[o])<parseFloat(e[o])?-1:parseFloat(t[o])>parseFloat(e[o])?1:0}),e){case"sortAscending":case"ascending":n.data.chartData=a;break;case"sortDescending":case"descending":n.data.chartData=a.reverse();break;default:n.data.chartData=a}}},{key:"setTipData",value:function(t,e){var a=this,r=a.currentData.chartData,n=a.options.color,i=t[a.data.dataTable.label],o={};if("treemap"===a.config.type)for(var l in t)l!==a.data.dataTable.series&&l!==a.data.dataTable.size||(o[l]=t[l]);else if("bar"===a.config.type||"line"===a.config.type||"area"===a.config.type){i=r[e][a.data.dataTable.label];for(var l in r[e])l!==a.data.dataTable.label&&(o[l]=r[e][l])}else if("gantt"===a.config.type){for(l in r[e])r[e].hasOwnProperty(l)&&l!==a.data.dataTable.group&&(o[l]=r[e][l]);for(var s,d,c,p=Math.floor(Object.keys(a.data.dataTable).length/2),g=1;g<=p;g++)s=new Date(r[e][a.data.dataTable["start "+g]]),d=new Date(r[e][a.data.dataTable["end "+g]]),c=d.getTime()-s.getTime(),o["Duration "+g]=Math.ceil(c/864e5)+" days";i=r[e][a.data.dataTable.group]}else if("pie"===a.config.type||"radial"===a.config.type){i=t.label;for(var l in t)"label"!==l&&(o[l]=t[l]);delete o.outerRadius}else if("circlepack"===a.config.type||"sunburst"===a.config.type)i=t.data.name,o[a.data.dataTable.value]=t.value;else if("cloud"===a.config.type)i=t[a.data.dataTable.label],o[a.data.dataTable.value]=t[a.data.dataTable.value];else if("heatmap"===a.config.type)i=t.yAxisName+" to "+t.xAxisName,t.hasOwnProperty("value")&&(o.value=t.value);else if("sankey"===a.config.type)i=t.source.name+" to "+t.target.name,t.hasOwnProperty("value")&&(o.value=t.value);else if("singleaxis"===a.config.type){i=t.data[a.data.dataTable.label];for(var l in a.data.dataTable)"label"!=l&&(o[a.data.dataTable[l]]=t.data[a.data.dataTable[l]])}else for(var l in t)l!==a.data.dataTable.label&&(o[l]=t[l]);return{data:t,tipData:o,index:e,title:i,color:n,viz:a.config.type}}},{key:"generateSVG",value:function(t,e,a){var r,n=this,i={},o={},l=n.chartDiv.node().getBoundingClientRect(),s=e,d=a;n.options.customMargins&&(s=n.options.customMargins),s?i=s:(i={top:55,right:50,left:100,bottom:70},null!=t&&(t.length<=3?i.bottom=70:t.length<=6?i.bottom=85:i.bottom=130)),n.options.hasOwnProperty("toggleLegend")&&!n.options.toggleLegend&&("pie"===n.config.type||"radial"===n.config.type||"circlepack"===n.config.type||"heatmap"===n.config.type?i.left=40:"treemap"!==n.config.type&&"bar"!==n.config.type&&"gantt"!==n.config.type&&"scatter"!==n.config.type&&"line"!==n.config.type||(i.bottom=40)),n.currentData&&n.currentData.yAxisData&&(r=T("y",n.currentData.yAxisData,n.options,l,i,n.chartDiv,n.config.type),i.left=Math.ceil(r)+20),"heatmap"===n.config.type&&n.currentData&&n.currentData.xAxisData&&(r=T("x",n.currentData.xAxisData,n.options,l,i,n.chartDiv,n.config.type),r=Math.ceil(r),r>100&&(r=120),i.top=Math.ceil(r),d={},d.width=20*n.currentData.xAxisData.values.length,d.height=20*n.currentData.yAxisData.values.length,d.width<l.width&&(i.right=parseInt(l.width)-i.left-d.width-10),d.height<l.height&&(i.bottom=parseInt(l.height)-i.top-d.height-10)),d&&d.hasOwnProperty("height")?o.height=d.height:o.height=parseInt(l.height)-i.top-i.bottom,d&&d.hasOwnProperty("width")?o.width=d.width:o.width=parseInt(l.width)-i.left-i.right,n.config.margin=i,n.config.container=o,n.svg=n.chartDiv.select("svg").remove(),"heatmap"===n.config.type||"singleaxis"===n.config.type?n.svg=n.chartDiv.append("svg").attr("class","editable-svg").attr("width",o.width+i.left+i.right).attr("height",o.height+i.top+i.bottom).append("g").attr("class","container").attr("transform","translate("+i.left+","+i.top+")"):n.svg=n.chartDiv.append("svg").attr("class","full-width full-height editable-svg").attr("width",o.width+i.left+i.right).attr("height",o.height+i.top+i.bottom).append("g").attr("transform","translate("+i.left+","+i.top+")"),n.options.hasOwnProperty("backgroundColor")&&n.colorBackground(n.options.backgroundColor)}},{key:"generateXAxis",value:function(e,a){var r,o=this,l=t.getAxisScale("x",e,o.config.container,o.options),s=o.config.container.height,d=o.config.container.width,c="xAxisLabels editable editable-xAxis editable-text";"NUMBER"===e.dataType&&(c+=" editable-num"),o.svg.selectAll(".xAxisContainer").remove(),o.currentData.xAxisScale=l;var p=0;"NUMBER"===o.currentData.xAxisData.dataType&&(p=5),r="singleaxis"===o.config.type?d3.axisTop(l).tickSize(p):d3.axisBottom(l).tickSize(p),a&&r.ticks(a);var g=s;"singleaxis"===o.config.type&&(g=0);var u=o.svg.append("g").attr("class","xAxisContainer").attr("transform","translate(0,"+g+")"),h=u.append("g").attr("class","xAxis").transition().duration(0).call(r),f=i(e.values);h.select("path").attr("stroke",o.vars.axisColor).attr("stroke-width",o.vars.strokeWidth),h.selectAll("line").attr("stroke",o.vars.axisColor).attr("stroke-width",o.vars.stroke),h.selectAll("text").attr("fill",o.vars.black).attr("class",c).style("text-anchor","middle").attr("font-size",o.options.fontSize).attr("transform","translate(0, 3)").text(function(t){return"NUMBER"===e.dataType||o.options.rotateAxis?n(t,f):t}),u.append("g").attr("class","xLabel").append("text").attr("class","xLabel editable editable-text editable-content").attr("text-anchor","middle").attr("font-size",o.options.fontSize).text(function(){return"DATE"===e.dataType?"":e.label}).attr("transform","translate("+d/2+", 33)")}},{key:"formatXAxisLabels",value:function(t,e){var a=this,r=!0,o=a.config.container.width,l=[],s=null,d=a.currentData.xAxisData.dataType,c=a.currentData.xAxisData.values;"NUMBER"===d&&(s=i(c)),a.svg.append("g").selectAll(".dummyText").data(c).enter().append("text").attr("font-family","sans-serif").attr("font-size",a.options.fontSize).text(function(t){var e=t;return"NUMBER"===d&&(e=n(t,s)),e}).each(function(){var t=this.getComputedTextLength()+10;l.push(t),this.remove()});for(var p=0;p<l.length;p++){l[p]>o/t&&(r=!1)}r?(e&&a.generateXAxis(a.currentData.xAxisData,t),a.svg.selectAll(".xAxisLabels").style("display","block")):t>1&&"NUMBER"===a.currentData.xAxisData.dataType?a.formatXAxisLabels(t-1,!0):a.svg.selectAll(".xAxis").selectAll("text").style("display","none")}},{key:"generateYAxis",value:function(e){var a,r,o,l,s=this,d=t.getAxisScale("y",e,s.config.container,null,s.options),c="yAxisLabels editable editable-yAxis editable-text",p=Math.floor(s.config.container.height/14);if("NUMBER"===e.dataType&&(c+=" editable-num"),s.currentData.yAxisScale=d,s.svg.selectAll(".yAxisContainer").remove(),s.svg.selectAll("text.yLabel").remove(),p>10&&(p<20?p=10:p<30?p/=2:p=15),r=d3.axisLeft().ticks(p).scale(d).tickSize(5).tickPadding(5),e.hideValues&&r.tickFormat(""),o=s.svg.append("g").attr("class","yAxisContainer"),o.append("g").attr("class","yLabel").append("text").attr("class","yLabel editable editable-text editable-content").attr("text-anchor","start").attr("font-size",s.options.fontSize).attr("fill-opacity",0).attr("x",0).attr("y",0).attr("transform","translate("+(10-s.config.margin.left)+", -10)").text(e.label).transition().duration(0).attr("fill-opacity",1),l=o.append("g").attr("class","yAxis"),l.transition().duration(0).call(r),l.select("path").attr("stroke",s.vars.axisColor).attr("stroke-width",s.vars.strokeWidth),a=0,e.hideValues)l.selectAll("line").attr("stroke-width",0);else{l.selectAll("line").attr("stroke",s.vars.axisColor).attr("stroke-width",s.vars.stroke),l.selectAll("text").attr("fill","black").attr("class",c).attr("transform","rotate(0)").attr("font-size",s.options.fontSize).append("svg:title");var g=i(e.values);l.selectAll("text").transition().text(function(t){if(s.options.rotateAxis)return t;var e="";return e=t.length>13?t.substring(0,13)+"...":t,n(e,g)}).each(function(t,e,r){r[0].getBBox().width>a&&(a=r[0].getBBox().width)}),a>0&&(s.options.yLabelWidth=Math.ceil(a)+20)}}},{key:"generateLegend",value:function(t,e){var a=this,r=a.svg;r.selectAll(".legend").remove();var n=d(a,t,e);e&&O(a,n,e,t),"none"!==a.options.thresholds&&a.options.thesholdLegend===!0&&("bar"!==a.config.type&&"area"!==a.config.type&&"line"!==a.config.type||a.config.container.height>200&&a.config.container.width>200&&M(a)),a.options.toggleLegend||(r.selectAll(".legend").remove(),r.selectAll(".legend-carousel").remove())}},{key:"generateVerticalLegend",value:function(t){var e=this,a=e.svg,r=e.currentData.legendData;a.selectAll(".legend").remove();var n=L(e,r,t);"generatePack"!==t&&O(e,n,t,r),e.options.toggleLegend||(a.selectAll(".legend").remove(),a.selectAll(".legend-carousel").remove())}},{key:"generateClipPath",value:function(){var t=this,e=t.svg,a=t.config.type;e.append("clipPath").attr("id","clip").append("rect").attr("x",0).attr("y",0).attr("width",t.config.container.width).attr("height",t.config.container.height);var r="."+a+"-container";e.select(r).attr("clip-path","url(#clip)")}},{key:"setThreshold",value:function(t){var e=this,a=e.options.thresholds,r=a?Object.keys(a).length:0;if("none"!==a)for(var n=r-1;n>-1;n--){var i=a[n];if(t>=Number(i.threshold))return"rect-"+n}}},{key:"generateLineThreshold",value:function(){var t=this,e=t.svg,a=t.config.container.width,r=t.config.container.height,n=t.options.thresholds,i=Object.keys(t.options.thresholds).length,o=t.currentData.xAxisScale,l=t.currentData.yAxisScale;if("none"!==n)for(var s=0;s<i;s++){var d=n[s];t.options.rotateAxis?e.append("line").style("stroke",d.thresholdColor).attr("x1",o(d.threshold)).attr("y1",0).attr("x2",o(d.threshold)).attr("y2",r).attr("stroke-dasharray","3, 3"):e.append("line").style("stroke",d.thresholdColor).attr("x1",0).attr("y1",l(d.threshold)).attr("x2",a).attr("y2",l(d.threshold)).attr("stroke-dasharray","3, 3")}}},{key:"colorBackground",value:function(t){var e=this,a=e.chartDiv;e.options.backgroundColor=t,a.style("background-color",""+t)}},{key:"displayValues",value:function(){var e=this,a=e.svg,r=e.options,i=e.config.container,o=e.data.chartData,l=e.currentData.xAxisData,s=e.currentData.yAxisData,d=e.options.legendOptions;if(r.seriesFlipped&&(o=e.flippedData.chartData,d=e.options.flippedLegendOptions),
r.displayValues===!0){a.selectAll(".displayValueContainer").remove();var c=[],p=JSON.parse(JSON.stringify(o));if(d)for(var g=0;g<p.length;g++)for(var h=0;h<d.length;h++)d[h].toggle===!1&&delete p[g][d[h].element];for(var h=0;h<p.length;h++){var f=w(p[h],e.currentData.dataTable,e.config.type);c.push(f.slice(0,p[h].length))}var x=u(p,r,l,s,i,e),v=t.getAxisScale("x",l,i,r),y=t.getAxisScale("y",s,i,r);if(r.rotateAxis){var b=a.append("g").attr("class","displayValuesGroup").selectAll("g").data(c).enter().append("g").attr("class","displayValuesGroup").attr("transform",function(t,e){return"translate(0,"+(y.paddingOuter()*y.step()+y.step()*e)+")"});b.selectAll("text").data(function(t){return t}).enter().append("text").attr("class","displayValue").attr("x",function(t,e,a){return x.width(t,e,a)+x.x(t,e,a)}).attr("y",function(t,e,a){return x.y(t,e,a)+x.height(t,e,a)/2}).attr("dy",".35em").attr("text-anchor","start").attr("fill","black").text(function(t){return n(Math.round(100*t)/100)}).attr("font-size",e.options.fontSize)}else a.append("g").attr("class","displayValuesGroup").selectAll("g").data(c).enter().append("g").attr("class","displayValuesGroup").attr("transform",function(t,e){return"translate("+(v.paddingOuter()*v.step()+v.step()*e)+",0)"}),b.selectAll("text").data(function(t){return t}).enter().append("text").attr("class","displayValue").attr("x",function(t,e,a){return Math.round(x.x(t,e,a)+x.width(t,e,a)/2)}).attr("y",function(t,e,a){return Math.round(x.y(t,e,a))}).attr("text-anchor","middle").attr("fill","black").text(function(t,e,a){return n(Math.round(100*t)/100)}).attr("font-size",e.options.fontSize)}else a.selectAll(".displayValueContainer").remove()}},{key:"drawGridlines",value:function(e){var a=this;a.svg.selectAll("g.gridLines").remove(),a.svg.append("g").attr("class","gridLines");var r;if(a.options.rotateAxis===!0||"gantt"===a.config.type||"singleaxis"===a.config.type){var n=a.config.container.height,i=t.getAxisScale("x",e,a.config.container);"STRING"===e.dataType?r=e.values:"NUMBER"!==e.dataType&&"DATE"!==e.dataType||(r=i.ticks(10)),a.svg.select(".gridLines").selectAll(".horizontalGrid").data(r).enter().append("line").attr("class","horizontalGrid").attr("x1",function(t,e){return e>0?i(t):0}).attr("x2",function(t,e){return e>0?i(t):0}).attr("y1",function(t,e){return 0}).attr("y2",function(t,e){return e>0?n:0}).attr("fill","none").attr("shape-rendering","crispEdges").attr("stroke",function(){return"singleaxis"===a.config.type?"black":"#e6e6e6"}).attr("stroke-width","1px")}else{var o=a.config.container.width,l=t.getAxisScale("y",e,a.config.container);"STRING"===e.dataType?r=e.values:"NUMBER"!==e.dataType&&"DATE"!==e.dataType||(r=l.ticks(10)),a.svg.select(".gridLines").selectAll(".horizontalGrid").data(r).enter().append("line").attr("class","horizontalGrid").attr("x1",0).attr("x2",function(t,e){return e>0?o:0}).attr("y1",function(t,e){return e>0?l(t):0}).attr("y2",function(t,e){return e>0?l(t):0}).attr("fill","none").attr("shape-rendering","crispEdges").attr("stroke","#e6e6e6").attr("stroke-width","1px")}}},{key:"getBarDataFromOptions",value:function(){var t=this,e=t.flippedData,a=t.data,r={};return t.options.seriesFlipped?(r.chartData=e.chartData,r.legendData=e.legendData,r.dataTable=e.dataTable,t.options.color=e.color,t.options.rotateAxis===!0?(r.xAxisData=e.yAxisData,r.yAxisData=e.xAxisData):(r.xAxisData=e.xAxisData,r.yAxisData=e.yAxisData)):(r.chartData=a.chartData,r.legendData=a.legendData,r.dataTable=a.dataTable,t.options.color=a.color,t.options.rotateAxis===!0?(r.xAxisData=a.yAxisData,r.yAxisData=a.xAxisData):(r.xAxisData=a.xAxisData,r.yAxisData=a.yAxisData)),r}},{key:"highlightItem",value:function(t,e,a,r){var n=this,i=n.svg;a>=0?("pie"===n.config.type&&(i.select(".pie-container").selectAll(e).attr("stroke","#FFFFFF").attr("stroke-width",1),i.select(".pie-container").selectAll(e).filter(".highlight-class-"+a).attr("stroke","black").attr("stroke-width",2)),"scatterplot"===n.config.type&&(i.select(".scatter-container").selectAll(e).attr("stroke-width",0),i.select(".scatter-container").selectAll(e).filter(".scatter-circle-"+a).attr("stroke","black").attr("stroke-width",2))):r?("bar"===n.config.type&&(i.select(".bar-container").selectAll(e).attr("stroke",0).attr("stroke-width",0),i.select(".bar-container").selectAll(".highlight-class-"+r).attr("stroke","black").attr("stroke-width",2)),"line"!==n.config.type&&"area"!==n.config.type||(i.select(".line-container").selectAll(e).attr("stroke",0).attr("stroke-width",0),i.select(".line-container").selectAll(e).filter(".highlight-class-"+r).attr("stroke","black").attr("stroke-width",2))):console.log("need to pass highlight index to highlight item")}},{key:"removeHighlight",value:function(){var t=this,e=t.svg;"pie"===t.config.type&&e.select(".pie-container").selectAll("path").attr("stroke","#FFFFFF").attr("stroke-width",0),"scatterplot"===t.config.type&&e.select(".scatter-container").selectAll("circle").attr("stroke-width",0),"bar"===t.config.type&&e.select(".bar-container").selectAll("rect").attr("stroke",0).attr("stroke-width",0),"line"!==t.config.type&&"area"!==t.config.type||e.select(".line-container").selectAll("circle").attr("stroke",0).attr("stroke-width",0)}}]),t}();z.getColors=h,z.setBarLineLegendData=b,z.createColorsWithDefault=m,z.values=w,z.getYScale=v,z.getZScale=k,z.getLegendElementToggleArray=s,z.generateLegendElements=d,z.updateDataFromLegend=c,z.createCarousel=p,z.generateThresholdLegend=M,z.attachClickEventsToLegend=O,z.generateVerticalLegendElements=L,z.createVerticalCarousel=N,z.getToggledData=l,z.getPlotData=g,z.getPosCalculations=u,z.getXScale=x,z.getYScale=v,z.setBarLineLegendData=b,z.jvFormatValue=n,z.getFormatExpression=o,z.generateEventGroups=S,z.jvFormatValueType=i,z.getAxisScale=f,z.setChartColors=D,z.getDataTypeFromKeys=y,z.cleanToolData=A,e.exports=z},{"./jvTip.js":3}],3:[function(t,e,a){"use strict";function r(t){var e=this;e.type=t.type,e.chartDiv=t.chartDiv,e.chartDiv.select(".jv-tooltip").remove(),e.chartDiv.append("div").attr("class","tooltip jv-tooltip").style("pointer-events","none")}r.prototype.showTip=function(){},r.prototype.hideTip=function(){var t=this;t.toolTip&&t.toolTip.style("display","none")},r.prototype.generateSimpleTip=function(t,e,a){return},e.exports=r},{}],4:[function(t,e,a){"use strict";function r(){var t={};return t.gray="#cccccc",t.strokeWidth="2px",t.black="#000000",t.axisColor=t.gray,t.axisWidth=t.strokeWidth,t}t("./jvCharts.js").prototype.getDefaultOptions=r},{"./jvCharts.js":2}],5:[function(t,e,a){"use strict";function r(t){var e=t.getBarDataFromOptions();t.currentData=e,t.generateSVG(e.legendData),t.generateXAxis(e.xAxisData),t.generateYAxis(e.yAxisData),t.generateLegend(e.legendData,"generateBars"),t.generateBars(e),"function"==typeof e.xAxisScale.ticks?t.formatXAxisLabels(e.xAxisScale.ticks().length):t.formatXAxisLabels(e.xAxisScale.domain().length)}function n(t){t.options.hasOwnProperty("sortType")&&t.options.sortType&&t.options.sortLabel&&"default"!==t.options.sortType&&t.organizeChartData(t.options.sortLabel,t.options.sortType),t.data.legendData=i(t.data),t.data.xAxisData=t.setAxisData("x",t.data),t.data.yAxisData=t.setAxisData("y",t.data),t.options.seriesFlipped&&(t.setFlippedSeries(t.data.dataTableKeys),t.flippedData.color=d.setChartColors(t.options.color,t.flippedData.legendData,t.colors)),t.data.color=d.setChartColors(t.options.color,t.data.legendData,t.colors)}function i(t){var e=[];for(var a in t.dataTable)t.dataTable.hasOwnProperty(a)&&"label"!==a&&e.push(t.dataTable[a]);return e}function o(){var t=this,e=t.svg,a=(t.config.type,t.config.container.width),r=t.config.container.height,n=t.options.thresholds,i=n?Object.keys(n).length:0,o=t.currentData.xAxisScale,l=t.currentData.yAxisScale;if("none"!==n)for(var s=0;s<i;s++){var d=n[s];if(t.options.xAxisThreshold||(t.options.rotateAxis?e.append("line").style("stroke",d.thresholdColor).attr("x1",o(d.threshold)).attr("y1",0).attr("x2",o(d.threshold)).attr("y2",r).attr("stroke-dasharray","3, 3"):e.append("line").style("stroke",d.thresholdColor).attr("x1",0).attr("y1",l(d.threshold)).attr("x2",a).attr("y2",l(d.threshold)).attr("stroke-dasharray","3, 3")),1==t.options.colorChart){var c=d3.selectAll("rect.rect-"+s);c.attr("fill",d.thresholdColor)}}}function l(t){var e=this,a=e.svg,r=e.options,n=(e.config.container,0),i=0,o=0,l=0;a.selectAll("g.bar-container").remove();var c=a.append("g").attr("class","bar-container").selectAll("g"),p=e.options.seriesFlipped?e.options.flippedLegendHeaders?e.options.flippedLegendHeaders:t.legendData:e.options.legendHeaders?e.options.legendHeaders:t.legendData,g=d.getToggledData(t,p);s(c,g,e);d.generateEventGroups(c,g,e).on("mouseover",function(t,s,d){if(e.draw.showToolTip){var c=e.setTipData(t,s);e.tip.generateSimpleTip(c,e.data.dataTable,d3.event),a.selectAll(".tip-line").remove();var p=d3.select(this);n=p.node().getBBox().x,i=p.node().getBBox().width,o=p.node().getBBox().height,l=p.node().getBBox().y,a.append("line").attr("class","tip-line").attr("x1",function(){return r.rotateAxis?0:n+i/2}).attr("x2",function(){return r.rotateAxis?i:n+i/2}).attr("y1",function(){return r.rotateAxis?l+o/2:0}).attr("y2",function(){return r.rotateAxis?l+o/2:o}).attr("fill","none").attr("shape-rendering","crispEdges").attr("stroke","black").attr("stroke-width","1px")}}).on("mousemove",function(t,a){if(e.draw.showToolTip){e.tip.hideTip();var r=e.setTipData(t,a);e.tip.generateSimpleTip(r,e.data.dataTable,d3.event)}}).on("mouseout",function(t){e.draw.showToolTip&&(e.tip.hideTip(),a.selectAll("line.tip-line").remove())}),e.displayValues(),e.generateClipPath(),e.generateBarThreshold()}function s(t,e,a){var r,n=a.config.container,i=a.options,o=a.currentData.xAxisData,l=a.currentData.yAxisData,s=i.color,c=d.getAxisScale("x",o,n,null,i),p=d.getAxisScale("y",l,n,null,i),g=d.getPosCalculations(e,i,o,l,n,a),u=d.getPlotData(e,a);"STRING"!==o.dataType&&o.hasOwnProperty("min")?"NUMBER"===o.dataType&&(r=t.data(u).enter().append("g").attr("class","bar-group").attr("transform",function(t,e){return"translate(0,"+(p.paddingOuter()*p.step()+p.step()*e)+")"})):r=t.data(u).enter().append("g").attr("class","bar-group").attr("transform",function(t,e){return"translate("+(c.paddingOuter()*c.step()+c.step()*e)+",0)"});var h=-1;return r.selectAll("rect").data(function(t){return t}).enter().append("rect").attr("class",function(t,r,n){0===r&&h++;var i=String(e[h][a.currentData.dataTable.label]).replace(/\s/g,"_").replace(/\./g,"<dot>"),o=String(a.currentData.legendData[r]).replace(/\s/g,"_").replace(/\./g,"<dot>"),l=e[h][a.currentData.dataTable.label];if(a.options.xAxisThreshold)var s=a.setThreshold(l);else var s=a.setThreshold(t);return"editable editable-bar bar-col-"+i+"-index-"+o+" highlight-class-"+i+" rect "+s}).attr("x",function(t,e,a){return g.startx(t,e)}).attr("y",function(t,e){return g.starty(t,e)}).attr("width",function(t,e){return g.startwidth(t,e)}).attr("height",function(t,e,a){return g.startheight(t,e)}).attr("fill",function(t,e){if(a.options.seriesFlipped)var r=d.getColors(s,e,a.options.flippedLegendHeaders[e]);else var r=d.getColors(s,e,a.options.legendHeaders[e]);return r}).attr("rx",0).attr("ry",0).attr("opacity",.9).attr("clip-path",function(t){return t>3e7?"url(#clip-above)":"url(#clip-below)"}).transition().duration(800).ease(d3.easePolyOut).attr("x",function(t,e,a){return g.x(t,e,a)}).attr("y",function(t,e,a){return g.y(t,e,a)}).attr("width",function(t,e,a){return g.width(t,e)}).attr("height",function(t,e,a){return g.height(t,e)}),r}var d=t("../jvCharts.js");d.prototype.bar={paint:r,setData:n};d.prototype.generateBarThreshold=o,d.prototype.generateBars=l,e.exports=d},{"../jvCharts.js":2}],6:[function(t,e,a){"use strict";function r(t){t.options.sortType&&t.options.sortLabel&&"default"!==t.options.sortType&&t.organizeChartData(t.options.sortLabel,t.options.sortType,dataTableKeys),t.data.legendData=n(t.data),t.data.xAxisData=t.setAxisData("x",t.data),t.data.yAxisData=t.setAxisData("y",t.data),t.data.color=d.setChartColors(t.options.color,t.data.legendData,t.colors)}function n(t){var e=[];for(var a in t.dataTable)t.dataTable.hasOwnProperty(a)&&"label"!==a&&e.push(t.dataTable[a]);return e}function i(t){var e=t.getBarDataFromOptions();t.currentData=e,t.generateSVG(e.legendData),t.generateXAxis(e.xAxisData),t.generateYAxis(e.yAxisData),t.generateLegend(e.legendData,"generateLine"),t.options.rotateAxis?t.formatXAxisLabels(e.xAxisScale.ticks().length):t.formatXAxisLabels(e.xAxisScale.domain().length),t.generateLine(e)}function o(t){var e=this,a=e.svg,r=e.options;e.config.container;a.selectAll("g.line-container").remove();r.color;a.selectAll("g.line-container").remove();var n=a.append("g").attr("class","line-container").selectAll("g"),i=e.options.seriesFlipped?e.options.flippedLegendHeaders?e.options.flippedLegendHeaders:t.legendData:e.options.legendHeaders?e.options.legendHeaders:t.legendData,o=d.getToggledData(t,i);"area"===e.config.type&&e.fillArea(o);l(n,o,e);return d.generateEventGroups(n,o,e).on("mouseover",function(t,a,r){if(e.draw.showToolTip){var n=e.setTipData(t,a);e.tip.generateSimpleTip(n,e.data.dataTable,d3.event)}}).on("mousemove",function(t,r){if(e.tip.hideTip(),a.selectAll(".tip-line").remove(),e.draw.showToolTip){var n=e.setTipData(t,r);e.tip.generateSimpleTip(n,e.data.dataTable,d3.event)}}).on("mouseout",function(t){e.tip.hideTip(),a.selectAll(".tip-line").remove()}),e.displayValues(),e.generateClipPath(),e.generateLineThreshold(),n}function l(t,e,a){var r,n,i,o=a.config.container,l=a.options,s=a.currentData.xAxisData,c=a.currentData.yAxisData,p=a.currentData.legendData,g=l.color,u=d.getAxisScale("x",s,o,"no-padding",l),h=d.getAxisScale("y",c,o,"no-padding",l);l.rotateAxis===!0?(n=function(t,e){return u(t)},i=function(t,a){return h(e[a][c.label])+o.height/e.length/2}):(n=function(t,a){return u(e[a][s.label])+o.width/e.length/2},i=function(t,e){return h(t)});for(var f={},x=0;x<e.length;x++)for(var v=0;v<p.length;v++)if(void 0!==l.legendOptions){if(l.legendOptions[v].toggle===!1)continue;f[p[v]]||(f[p[v]]=[]),f[p[v]].push(parseFloat(e[x][p[v]]))}else f[p[v]]||(f[p[v]]=[]),f[p[v]].length<e.length&&f[p[v]].push(parseFloat(e[x][p[v]]));a.svg.selectAll(".lines").remove(),a.svg.selectAll(".line").remove(),a.svg.selectAll(".circle").remove(),a.svg.selectAll("#line-gradient").remove(),r=a.svg.selectAll(".line-container");var y={},b={},D=0,m=[],A=!1;for(var v in f)if(f.hasOwnProperty(v)){if(y[v]=d3.line().x(function(t,e){return isNaN(t)?null:n(t,e)}).y(function(t,e){return isNaN(t)?null:i(t,e)}),r.append("g").attr("class","line "+v).append("path").attr("stroke",function(t,e,a){var r=d.getColors(g,e,v);return m.push(r),r}).attr("stroke-width","2").attr("fill","none").attr("d",y[v](f[v])),"none"!=a.options.thresholds&&0!=a.options.colorChart){if(a.options.colorLine){var T=[];if(a.options.rotateAxis){var w={percent:0,color:m[D]};T.push(w);for(var k=0;k<Object.keys(a.options.thresholds).length;k++){var S=100*a.options.thresholds[k].threshold/(s.max-s.min),M={percent:S,color:a.options.thresholds[k].thresholdColor};T.push(M)}}else{var w={percent:0,color:m[D]};T.push(w);for(var k=0;k<Object.keys(a.options.thresholds).length;k++){var S=100*a.options.thresholds[k].threshold/(c.max-c.min),M={percent:S,color:a.options.thresholds[k].thresholdColor};T.push(M)}}var O=a.setLineThresholdData(a,T,m[D]);r.selectAll("path").attr("class","line-threshold"),a.options.rotateAxis?a.svg.append("linearGradient").attr("id","line-gradient").attr("gradientUnits","userSpaceOnUse").attr("x1",n(s.min)).attr("y1",0).attr("x2",n(s.max)).attr("y2",0).selectAll("stop").data(O).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color}):a.svg.append("linearGradient").attr("id","line-gradient").attr("gradientUnits","userSpaceOnUse").attr("x1",0).attr("y1",i(c.min)).attr("x2",0).attr("y2",i(c.max)).selectAll("stop").data(O).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color})}A=!0}b[v]=r.append("g").attr("class","circle "+v).selectAll("circle").data(f[v]).enter().append("circle").attr("class",function(t,e){return"circle-"+a.currentData.chartData[e][a.currentData.dataTable.label]+" highlight-class-"+e}).attr("cx",function(t,e){return isNaN(t)?null:n(t,e)}).attr("cy",function(t,e){return isNaN(t)?null:i(t,e)}).attr("fill",function(t,e,r){if(isNaN(t))return null;if(1==A){var n=Object.keys(a.options.thresholds).length-1;if(a.options.rotateAxis)for(var i=n;i>-1;i--){var o=a.options.thresholds[i];if(t>=o.threshold)return o.thresholdColor}else for(var i=n;i>-1;i--){var o=a.options.thresholds[i];if(t>=o.threshold)return o.thresholdColor}}return d.getColors(g,e,v)}).attr("opacity",function(t,e,a){return isNaN(t)?0:1}).attr("r",2.5),D++}return r.selectAll(".circle")}function s(t,e,a){for(var r=[],n=0;n<e.length;n++){var i={offset:e[n].percent+"%",color:e[n].color};if(r.push(i),n+1<e.length){var o={offset:e[n+1].percent+"%",color:e[n].color};r.push(o)}if(n==e.length-1){var l={offset:"100%",color:e[n].color};r.push(l)}}return r}var d=t("../jvCharts.js");d.prototype.line={paint:i,setData:r},d.prototype.generateLine=o,d.prototype.setLineThresholdData=s,e.exports=d},{"../jvCharts.js":2}],7:[function(t,e,a){"use strict";function r(t){t.data.legendData=n(t.data),t.data.color=l.setChartColors(t.options.color,t.data.legendData,t.colors)}function n(t){for(var e=[],a=t.chartData.length-1;a>=0;a--)e.push(t.chartData[a][t.dataTable.label]);return e}function i(t){var e={top:40,right:20,bottom:20,left:20};t.currentData=t.data,t.options.color=t.data.color,t.legendData=t.data.legendData,t.generateSVG(t.data.legendData,e),t.config.container.width>550&&t.generateVerticalLegend("generatePie"),t.generatePie(t.currentData)}function o(t){var e=this,a=e.svg,r=t.chartData,n=e.options,i=e.config.container,o=e.currentData.legendData;e.config.name;a.select("g.pie-container").remove();for(var s=[e.data.dataTable.label,e.data.dataTable.value],d=n.color,c=i.width,p=i.height,g=Math.min(p/2,c/3),u=[],h=0,f=0;f<r.length;f++)u[f]={label:r[f][s[0]],value:r[f][s[1]]};var x=JSON.parse(JSON.stringify(u));e.options.legendHeaders||(e.options.legendHeaders=o);var v=e.options.legendHeaders,y=l.getLegendElementToggleArray(v,o);if(y)for(var b=0;b<x.length;b++)for(var f=0;f<y.length;f++)y[f].element===x[b].label&&y[f].toggle===!1&&(x[b].value=0);for(var f=0;f<x.length;f++)h+=parseFloat(x[f].value);var D=a.append("g").data([x]).attr("class","pie-container").attr("height",200).attr("transform","translate("+c/2+","+g+")"),m=d3.pie().value(function(t){return t.value}),A=d3.arc().innerRadius(0).outerRadius(g),T=d3.arc().innerRadius(0).outerRadius(g+15),w=D.selectAll("g.slice").data(m).enter().append("g").attr("class","slice");w.append("path").attr("fill",function(t,e){return l.getColors(d,e,r[e][s[0]])}).attr("d",function(t){return A(t)}).attr("class",function(t,e){return"editable editable-pie pie-slice-"+e+" highlight-class-"+e}).attr("stroke","#FFFFFF").attr("stroke-width",1).on("mouseover",function(t,a){if(e.draw.showToolTip){var r=e.setTipData(t.data,a);e.tip.generateSimpleTip(r,e.data.dataTable,d3.event),w.selectAll("*").style("opacity",.7);var n=d3.select(this);n.style("opacity",1),n.transition().duration(200).attr("d",T)}}).on("mousemove",function(t,a){if(e.draw.showToolTip){e.tip.hideTip();var r=e.setTipData(t.data,a);e.tip.generateSimpleTip(r,e.data.dataTable,d3.event)}}).on("mouseout",function(t){e.tip.hideTip(),w.selectAll("*").style("opacity",1),d3.select(this).transition().duration(250).attr("d",A)}),w.append("svg:text").attr("class","sliceLabel").attr("transform",function(t){var e=A.centroid(t);return e[0]=1.6*e[0],e[1]=1.6*e[1],"translate("+e+")"}).attr("dy",".35em").attr("text-anchor","middle").text(function(t,e){var a=x[e].value/h*100;if((a=d3.format(".1f")(a))>5)return a+"%"}).attr("font-size",e.options.fontSize).attr("fill","#FFFFFF").attr("pointer-events","none")}var l=t("../jvCharts.js");l.prototype.pie={paint:i,setData:r},l.prototype.generatePie=o,e.exports=l},{"../jvCharts.js":2}],8:[function(t,e,a){"use strict";function r(t){t.data.legendData=n(t.data),t.data.xAxisData=i(t.data,"x",t.options),t.data.yAxisData=i(t.data,"y",t.options),t.data.zAxisData=t.data.dataTable.hasOwnProperty("z")?i(t.data,"z",t.options):{},t.data.color=p.setChartColors(t.options.color,t.data.legendData,t.colors)}function n(t){var e=[];if(t.dataTable.hasOwnProperty("series")){var a=t.dataTable.series;for(var r in t.chartData){var n=t.chartData[r][a];e.indexOf(n)===-1&&e.push(n)}}else t.dataTable.hasOwnProperty("label")&&e.push(t.dataTable.label);return void 0===e[0]&&(e=[],e.push(t.dataTable.label)),e.sort(),e}function i(t,e,a){for(var r=[],n=t.chartData,i=t.dataTable[e],o=i?n[0][i]:0,l=i?n[0][i]:0,s=0;s<t.dataTableKeys.length;s++)if(t.dataTableKeys[s].vizType===e){t.dataTableKeys[s].type;break}for(var d=1;d<n.length;d++)if(n[d].hasOwnProperty(i)){var c=n[d][i];isNaN(c)||(c=parseFloat(c),c>l?l=c:c<o&&(o=c))}return"z"!==e&&(o*=.9,l*=1.1),a&&(a.yMin&&!isNaN(a.yMin)&&"y"===e&&(o=a.yMin),a.yMax&&!isNaN(a.yMax)&&"y"===e&&(l=a.yMax),a.xMin&&!isNaN(a.xMin)&&"x"===e&&(o=a.xMin),a.xMax&&!isNaN(a.xMax)&&"x"===e&&(l=a.xMax)),r.push(o),r.push(l),{label:i,values:r,dataType:"NUMBER",min:o,max:l}}function o(t){var e={};e.chartData=t.data.chartData,e.legendData=t.data.legendData,e.dataTable=t.data.dataTable,t.options.color=t.data.color,e.xAxisData=t.data.xAxisData,e.yAxisData=t.data.yAxisData,e.zAxisData=t.data.zAxisData,t.currentData=e,t.generateSVG(e.legendData),t.generateXAxis(t.currentData.xAxisData),t.generateYAxis(t.currentData.yAxisData),t.generateLegend(t.currentData.legendData,"generateScatter"),t.generateScatter(),t.createLineGuide(),"function"==typeof e.xAxisScale.ticks?t.formatXAxisLabels(e.xAxisScale.ticks().length):t.formatXAxisLabels(e.xAxisScale.domain().length)}function l(t,e){return d3.mean(t,function(t){return+t[e]})}function s(){var t=this,e=t.svg,a=t.options,r=t.config.container,n=t.currentData.chartData,i=t.currentData.dataTable,o=t.currentData.xAxisData,s=t.currentData.yAxisData,d=l(n,i.x),c=l(n,i.y),g=p.getAxisScale("x",o,r,null,a),u=p.getAxisScale("y",s,r,null,a);e.selectAll("g.lineguide.x").remove(),e.selectAll("g.lineguide.y").remove();var h=e.append("g").attr("class","line-group"),f=h.append("g").attr("class","lineguide x").append("line").style("stroke","gray").style("stroke-dasharray","3, 3").style("opacity",function(){return a.lineGuide?1:0}).style("fill","black"),x=h.append("g").attr("class","lineguide y").append("line").style("stroke","gray").style("stroke-dasharray","3, 3").style("opacity",function(){return a.lineGuide?1:0}).style("fill","black");return f.attr("x1",g(d)).attr("y1",0).attr("x2",g(d)).attr("y2",r.height),x.attr("x1",0).attr("y1",u(c)).attr("x2",r.width).attr("y2",u(c)),h}function d(){var t=this,e=t.svg,a=t.options,r=t.config.container,n=(t.config.name,t.currentData.chartData),i=t.currentData.dataTable,o=t.currentData.xAxisData,l=t.currentData.yAxisData,s=t.currentData.zAxisData,d=t.currentData.legendData,g=a.color,u=(i.label,i.x,i.y,i.z,i.series,JSON.parse(JSON.stringify(n)));a.NODE_MIN_SIZE||(a.NODE_MIN_SIZE=4.5),a.NODE_MAX_SIZE||(a.NODE_MAX_SIZE=25),e.selectAll("g.scatter-container").remove(),e.selectAll("g.scatter-container.editable-scatter").remove(),t.options.legendHeaders||(t.options.legendHeaders=d);var h=t.options.legendHeaders,f=p.getLegendElementToggleArray(h,d),x=[];if(f)for(var v=0;v<u.length;v++)for(var y=0;y<f.length;y++)void 0===u[v][i.label]||""===u[v][i.label]?f[y].toggle===!1&&(u[v][i.x]=-1,u[v][i.y]=-1,u[v][i.z]=-1):f[y].element===u[v][i.series]&&f[y].toggle===!1&&(u[v][i.x]=-1,u[v][i.y]=-1,u[v][i.z]=-1);for(var v=0;v<u.length;v++)u[v][i.x]!==-1&&u[v][i.y]!==-1&&x.push(u[v]);var b=p.getAxisScale("x",o,r,null,a),D=p.getAxisScale("y",l,r,null,a);if(s&&"object"===(void 0===s?"undefined":c(s))&&Object.keys(s).length>0){console.log(s);var m=p.getZScale(s,r,a)}var A,T;A=function(t,e){return b(x[e][o.label])},T=function(t,e){return D(x[e][l.label])};var w=e.append("g").attr("class","scatter-container").selectAll("g");w.data(function(){return x}).enter().append("circle").attr("class",function(t,e){return"editable editable-scatter scatter-circle-"+e+" highlight-class"}).attr("cx",function(t,e){return A(t,e)}).attr("cy",function(t,e){return T(t,e)}).attr("opacity",.8).attr("r",function(t,e){return i.hasOwnProperty("z")&&a.toggleZ&&s&&"object"===(void 0===s?"undefined":c(s))&&Object.keys(s).length>0&&x[e][i.z]?m(x[e][i.z]):a.NODE_MIN_SIZE}).on("mouseover",function(e,a,r){if(t.draw.showToolTip){var n=t.setTipData(e,a);t.tip.generateSimpleTip(n,t.data.dataTable,d3.event)}}).on("mousemove",function(e,a){if(t.draw.showToolTip){t.tip.hideTip();var r=t.setTipData(e,a);t.tip.generateSimpleTip(r,t.data.dataTable,d3.event)}}).on("mouseout",function(){t.draw.showToolTip&&t.tip.hideTip()}).attr("fill",function(t,e){return i.hasOwnProperty("series")?p.getColors(g,e,x[e][i.series]):p.getColors(g,e,x[e][i.label])});return w}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p=t("../jvCharts.js");p.prototype.scatterplot={paint:o,setData:r},p.prototype.generateScatter=d,p.prototype.createLineGuide=s,e.exports=p},{"../jvCharts.js":2}]},{},[1,5,7,6,8,2,4,3]);
//# sourceMappingURL=maps/jvcharts-min.js.map
